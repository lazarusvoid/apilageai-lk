function toggleMCQSection() {
    const section = document.getElementById("mcq-challenges-list");
    section.style.display = (section.style.display === "none") ? "block" : "none";
}

document.addEventListener("DOMContentLoaded", () => {
    fetch("https://apilageai.lk/sideacess.php") 
        .then(res => res.json())
        .then(data => {
            const list = document.getElementById("mcq-challenges-list");
            list.innerHTML = "";

            if (!data.games) {
                list.innerHTML = "<p>No MCQ challenges found.</p>";
                return;
            }

            // Loop through games
            Object.entries(data.games).forEach(([gameId, game]) => {
                // Get first player (host)
                const host = Object.values(game.players || {})[0]?.gamerName || "Unknown";

                // Get grade + subject
                const grade = game.settings?.grade || "";
                const subject = game.settings?.subject || "";

                // Build sidebar item
                const item = document.createElement("div");
                item.className = "sidebar-item-wrapper";
                item.innerHTML = `
  <div class="sidebar-item">
    <a href="https://apilageai.lk/app?gameId=${gameId}" style="display: flex; align-items: center;">
        <i class="fa-solid fa-gamepad" style="margin-right: 8px;"></i>
        <span>G-${grade} ${subject} By ${host}</span>
    </a>
</div>
                `;
                list.appendChild(item);
            });
        })
        .catch(err => {
            console.error("Error loading MCQ challenges:", err);
            document.getElementById("mcq-challenges-list").innerHTML =
                "<p style='color:red;'>Failed to load challenges.</p>";
        });
});
